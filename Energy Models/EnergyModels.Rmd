---
title: "Energy Models"
output: beamer_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

# Overview of Energy Models
  + Trend
  + Time Series
  + Guess based on experience
  + Survey Based
  + Scenario Planning
  + I/O Models
  + Energy Balance Models
  + End Use
  + Process Modeling
  + Game Theory
  + Experimental/Behavioral

# Trend
  + Uses only patterns of the past to make forecasts about the future.
  + Cram a line though the data.
  
  
```{r Trend, echo=FALSE, message=FALSE,fig.width=6, fig.height=4}
library(dplyr)
Coal <- read.csv("https://www.eia.gov/totalenergy/data/browser/csv.cfm?tbl=T06.01")
CoalProduction <- Coal %>% filter(MSN == "CLPRPUS") 
library(stringr)
CoalProduction <- CoalProduction %>% filter(str_sub(as.character(YYYYMM),5 ) == "13")
CoalProduction <- CoalProduction %>% select(YYYYMM, Value)
names(CoalProduction) <- c("RawYear", "ProductionKShortTon")
CoalProduction$ProductionKShortTon <- as.numeric(as.character(CoalProduction$ProductionKShortTon))
CoalProduction <- CoalProduction  %>% mutate(Year = as.numeric(str_sub(as.character(RawYear),0,4 )))
library(ggplot2) 
qplot(Year, ProductionKShortTon, data = CoalProduction) + geom_smooth(method= lm)

```

# Trend Comments
+ Regression with time as RHS variable. $Y = time + \epsilon$
+ EC469 shows you how to do this.
+ Not everything is a line.  You sometimes have to transform the data, logs and such are common.
+ Only uses the past.  
    + I was 90 lbs at 15, 110 at 17, 130 at 18 and 220 at 26.
    + Today?
+ People don't react to prices and there is no change in technology.
+ That said, it works for alot of things and work when you have little time.
+ Plenty of energy modeling looks like this.
    + If you don't have the time, throw in a trend line.

# Time Series
+ Similar to trend only
    + May have $Y  = ARMA(p,q)$
    + or include a trend $Y = time + ARMA(p,q)$
+ EC 472 shows you how to do this.
+ Most energy data has a trend to it, which must be included in the model.
+ Best thought of as a refinement to the trend regressions with better treatment of residuals.
    + More accurate confidence intervals on existing data.
    + Slightly better with near-term forecasts.
+ Same problems as pure regression on trend.
+ If you have an extra few minutes, do this.

# Guess based on experience

+ Don't laugh, this works.
+ Old hands make very good guesses based on experience.
+ GDP even has components that are based on analysists best judgement.

# Survey Based

+ Book gives some examples.
+ Ask a bunch of experts about their best judgement and summarize
+ Often expanded as a Delphi Survey
+ For comically bad forecast see "Results of the Delphi IX Survey of Oil Forecasts" California Energy Comission, 1997.

# Delphi Surveys

+ Ask each person in private for best guess.
+ Compile results.
+ Ask outliers why they said what they did.
+ Give everyone:
    + The distribution of guesses for each parameter
    + The reasons the outliers gave for the answer the gave.
    
+ Ask for another guess.
+ Report the new distribution or repeat if desired.


# Scenario Planning



# I/O Models
+ Old school -- 1920s Leontief
+ Has an equilibrium concept
+ Assumes fixed ratios are used in production
    + No reaction to price changes
    + No reaction to input price changes
    + Constant returns to scale.
+ Often seen as part of a computable general equilibrium model to shorten run-times. REMI and IMPLAN use it in regional economic models.

+ Will not as you to do one unless you want to.
+ Book has an overly long explanation.

# Walk Through I/O model
$x_1 = \alpha_{1,1} x_1 + \alpha_2 x_{1,2} + d_1$

+ $x_1$ is how much of good one that gets made.
+ $d_1$ is how much final consumers want of good 1.
+ $\alpha_{1,1}$ the ammount of good 1 needed to produce good 1.
+ $\alpha_{1,2}$ the ammount of good 1 needed to produce good 1.
+ Each good has an equation
+ $\alpha$ can be zero but there are restrictions on how many and where. The matrix needs to be invertable.

Matrix Form
$x=Ax +d$ is solved as $x=(I-A)^{-1}d$


# Energy Balance Models

# End Use Modeling

# Process Modeling

# Game Theory

+ Not a full all economy model but a tool used to deal with decisons where:
    + There is not a monopoly or monopsony.
    + Not perfect competition.
+ Also used for:
    + Dynamic interactions of firms, think how gasoline prices go up fast but down slow.
    + Auction and bidding, technically mechanism design which is game theory backwards, to get people to tell the truth or do the right thing.
    + Basis for a lot of modern "regulation" which focuses on encouraging competition to reach goals.
+ Probably did some in 201 or 311.
    

# Experimental/Behavioral

+ Admit that people and firms do not act rationally.
+ Old school experiments run on people
+ Field experiments are common in economics now
    + Esther Duflo recieved the Bates Clark Award 2010
    + Bluffstone in Econ is running two now in Ethiopia and Nepal.
    
+ Typical Issues
    + Internal validity
        + Can you really connect cause to effect?
        + Did you avoid bias and control for everything?
    + External validity
        + Does it work in real life?
        + Does it work on other people?
    + Ecological validity
        + Did the experiment look like the real world?